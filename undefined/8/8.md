# \[8주차 DomainDrivenDesign]

DDD에 대해 설명하기에 앞서 
소프트웨어는 복잡하다 그리고 간단했던 소프트웨어도 기능을 추가하다보면 복잡해진다 
소프트웨어의 복잡성을 관리하지 못한다면 유지보수하기 힘들어지고, 좋지못한 레거시시스템으로 변하게 된다

## DomainDrivenDesign     
> 기술 영역과 도메인 영역을 분리하고, 도메인을 적절히 다루기 위한 모델을 구축한다      
> 대부분의 소프트웨어는 도메인과 도메인 로직에 집중해야한다      
> 복잡한 도메인 설계는 모델을 기반으로 해야한다     

## 기술부채란?   
> 많은 사람들이 기술부채를 코드를 엉망으로 작성하는 것으로 오해한다       
> 소프트웨어를 출시하게되면 우리는 뭔가를 배우게된다 (지식탐구, 지속적인 학습)     
> 그러나 대부분은 우리가 새롭게 배운 것을 프로그램에 반영하지 않는다(리팩터링)     
> 이로인해 이해하기 어려운 설계와 코드앞에 유지보수가 어려운 프로그램으로 변화하게된다      
> 이것이 기술부채이다      

## 기술부채문제는 어떻게 다루어야 하는가?     
> - 비즈니스를 이해하고 코드에 녹여내는 연습     
> - 비즈니스 도메인에 대한 이해가 심화되었을 때 설계와 코드에 반영하는 연습    

## 모델은 무엇인가? 
> 모델이란 현실을 해석하고, 추상화하여 단순화한 것이다      
> 우리는 비즈니스 도메인을 잘 모르기에 본질이 무엇인지 어떻게 추상화해야하는지를 모른다      
> 그래서 우리는 도메인전문가와 대화를 나누면서 모델을 발명하고, 대화를 할 때도 설계나 코드를 작성할 때에도 모델을 사용해야한다      
> 이렇게 하게되면 도메인에 대한 이해가 깊어지고, 더 나은 방향으로 설계를 할 수 있다.     
> 이로인해 우리가 더 똑똑해져서 긍정적인 기술부채가 생기게된다    
> 물론 이것도 해결은 해야한다.    

## 그렇다면 DDD는 어떻게 설계해야 하는가? 
DDD에는 2가지 설계 방식이 있다 

1. 전략적 설계
2. 전술적 설계 

먼저 전략적 설계에 대해 설명하겠다       

**전략적 설계**     
비즈니스의 성공을 위해 전략적 설계는 매우매우 중요하다 전략적 설계는 전술적 설계의 선행 조건이된다     

- 전략적 설계는 어떻게 하는가?     
> 1. 보편언어(UbiquitousLanguage)     
> 2. 제한된 컨텍스트(BoundedContext)     
> 3. 서브도메인(Subdomain)    
위 3가지에 대해 하나 씩 설명하겠다.       

- 보편언어(UbiquitousLanguage)     
**DDD의 시작이자 끝이다 소프트웨어를 제작하는데 참여하는 모두가 하나의 언어를 사용한다**     
도메인 전문가가 쓰는 어휘에 끌려가는 것이 아니라 서로 대화하면서 비즈니스도메인을 적절하게 다룰 용어를 함께 만들고, 이를 코드에도 작성할 수 있어야한다      
또한 설계가 어렵거나 코딩이 어려운 어휘들은 재검토 해야한다      

- 제한된 컨텍스트(BoundedContext)     
**커다란 시스템을 만들면 하나의 어휘가 다양한 의미로 쓰일 위험이 있다**    
예를들어 Account는 어떤 경우에는 계정을 의미하고, 어떤 경우에는 은행의 계좌를 의미한다     
그렇다고 해서 userAccount나 bankAccount등으로 나눠쓰게 된다면 접두어가 넘치게 되어 **대화할 때 비용이 증가한다.**   
맥락을 줄임으로써 하나의 대상을 지시하는 이상적인 상황을 만들 수 있다 
이렇게 하나의 시스템을 잘 조직화된(맥락이 통일된) BoundedContext로 나눔으로써 보편언어를 잘 만들고 유지할 수 있다.

- 서브도메인(Subdomain)     
시스템을 나눌 때 BoundedContext를 사용한다면 도메인을 나눌 때 사용하는 것이 바로 Subdomain이다    
BoundedContext는 소프트웨어를 조직화한다면 Subdomain은 현실을 조직화하는 방법이다    

**전술적 설계**     
전술적 설계만 다룰 경우에는 DDD Lite, ModelDrivenDegisn이라고도 한다    
전략적 설계는 정말 매우 중요하지만 강의를 듣고있는 현재 당장할 수 있는 것은 없다    
현재는 매우 작은 규모의 설계나 코드작성 문제만 다룰 수 있다     

- 전술적 설계는 어떻게 하는가?     
> 1. Entity    
> 2. ValueObject     
> 3. Aggregate     
> 4. Repository     
마찬가지로 위 4가지에 대해 설명하겠다   

- Entity    
Entity는 그동안 많이 다뤄왔던 주제다    
식별자가 있고, 이를 통해서 동일성을 확인한다면 Entity라고 할 수 있다    
우리는 BoundedContext안에서 Entity를 다룰 것이다     

- ValueObject     
VO는 식별성이나 연속성은 중요하지 않다    
VO는 속성을 통해 동등성을 판단하며, 항상 Java의 Equals 메소드를 구현해야 한다.      
VO는 쇼핑몰 비즈니스 모델을 다루기에 적합한 추상화, 모델링이라고 할 수 있다   

- Aggregate     
불변식을 유지하고, 여러 도메인 객체를 사용하기 좋게 만들어준다    
일종의 캡슐화를 진행해주며, 우리가 지켜야 할 제약조건, 규칙이라고 할 수 있다    
책임,위임,관심사분리 등의 주제를 고민하고, 적용할 수 있다.   
트랜잭션적 일관성 경계와 동의어이다    
설계 시 작은 Aggregate로 설계를 하며, ID로 다른 aggregate를 참조한다    
경계 밖에서는 일관성을 사용한다    

- Repository     
Aggregate를 관리하는 Collection처럼 작동한다     
오직 Aggregate만 REpository를 갖으며, 영속화 방법 및 기술을 감춘다     


데브로드를 진행 전 원티드에서 진행한 프리온보딩 백엔드 챌린지에서 비슷한 주제를 다뤘던 적이 있어서 추가로 작성하고자 한다      

- Domain이란?     
소프트웨어는 사용자가 원하는 문제를 해결하기 위해 만들어진다      
예를 들어 영화예매 시스템은 영화를 더 쉽고 빠르게 예매하려는 사용자의 문제를 해결하는 것이다     
문제해결을 위해 사용자가 프로그램을 사용하는 분야를 도메인이라고 한다     

도메인은 비즈니스의 중심이며, 프로그래밍을 한다면 가장 신경써줘야 할 곳이다       
도메인은 2가지로 나눌 수 있다      
- 메인도메인        
- 서브도메인     

메인 도메인은 비즈니스 전체에 대한 도메인이다     

서브도메인은 3가지로 나눌 수 있다     
1. 성공이 핵심이 되는 **핵심 서브도메인**    
2. 비즈니스적으로 필수지만 핵심은 아닌 **지원 서브 도메인**    
3. 꼭 필요하지는 않지만 비즈니스적으로 필요한 **범용 서브 도메인**     

## 배운 것      
이번 강의에서는 도메인을 생각하는 관점을 어떻게 가져야하는지에 배운 것 같다        
또 도메인을 어떻게 관리해야하는지에 대해서도 배운 것 같다      

## 어려웠던 것       
아무래도 아직 해보지 않았고, 실무에서 도메인을 직접 다뤄본 적이 없어 정확한 내용을 파악하지는 못한 것 같다      

## 느낀 점       
전략적 설계 부분은 실무에서 갖춰져야 하는 부분이 많은 것 같다 지금은 그냥 느낌과 내용에 대한 이해정도만 하고 추후 실무에서 부딪혀봐야 정확하게 알 수 있고, 배움을 토대로 파악할 수 있을 것 같다.      












